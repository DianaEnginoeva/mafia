using System; using System.Windows.Input; using Xamarin.Forms; using System.Threading.Tasks; using Newtonsoft.Json; using System.Collections.Generic;   namespace Mafia { 	public class Response 	{ 		public string Status { get; set; } 		public string Error { get; set; } 	}  	public class CreateRoomViewsModel 	{ 		public ICommand NewRoom { get; set; }  		public string RoomName { get; set; } 		//public string Error { get; set; } 		//public string UserName = GameService.Instance._userName;    		private Page _page;  		public CreateRoomViewsModel(Page page) 		{ 			_page = page; 			NewRoom = new Command(CreateNewRoom); 		}  		private async void CreateNewRoom() 		{ 			var json = "{\"Name\":\"" + RoomName + "\", \"UserName\":\"" + GameService.Instance._userName + "\"} "; // создание комнаты 			var response = await DataService.GetInstance().NewRoomsAsync(json); 			//await _page.DisplayAlert(RoomName, response, "Закрыть");  			var answer = JsonConvert.DeserializeObject<Response>(response);  			//await _page.DisplayAlert(answer.Error, answer.Error, "Закрыть"); 			if (answer.Status == "OK") 			{ 				GameService.Instance.GetRoomName(RoomName); 				GameService.Instance.Connect(GameService.Instance._userName); 				GameService.Instance.NewUser(GameService.Instance._userName);  				var app = (App)Application.Current; 				app.MainPage = new NavigationPage(new StartGameAdminPage()); 			} 			else 			{ 				await _page.DisplayAlert("Ошибка!", answer.Error, "Закрыть"); 			}   			//await _page.Navigation.PushAsync(new RoomPage()); 			//var rooms = JsonConvert.DeserializeObject<List<RoomModel>>(response);  		} 	} }  